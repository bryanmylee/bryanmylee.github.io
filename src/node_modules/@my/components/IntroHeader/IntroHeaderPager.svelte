<script lang="ts">
  import { onMount } from 'svelte';
  import { usePrevious } from 'svelte-previous';
  import { backspaceAndType } from '@my/transitions/backspaceAndType';

  const interval = 4000;

  export let values = [];
  $: maxIndex = values.length;
  const [currentValue, previousValue] = usePrevious('');
  let index = 0;
  $: $currentValue = values[index];
  const delayedUpdate = () => {
    setTimeout(() => {
      index = (index + 1) % maxIndex;
    }, interval);
  };
  onMount(delayedUpdate);
</script>

<div class="relative">
  {#key $currentValue}
    <h2
      in:backspaceAndType={{from:$previousValue}}
      on:introend={delayedUpdate}
      class="absolute font-bold w-max text-secondary"
      >
      {$currentValue}
    </h2>
  {/key}
</div>

