<script lang="ts" context="module">
  import type { Readable } from 'svelte/store';
  export type IIsTransitioning = Readable<boolean>;
</script>

<script lang="ts">
  import { setContext } from 'svelte';
  import { writable, derived } from 'svelte/store';
  import { fade } from 'svelte/transition';

  export let refresh: any;
  const isTransitioning = writable(false);
  setContext('isTransitioning', derived(isTransitioning, $i => $i));
</script>

{#key refresh}
  <div
    transition:fade={{duration:200}}
    on:introstart={() => $isTransitioning = true}
    on:outroend={() => $isTransitioning = false}
    >
    <slot/>
  </div>
{/key}

