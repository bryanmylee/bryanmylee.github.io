<script lang="ts" context="module">
  export interface ImportedSvg {
    default: string;
  }
</script>

<script lang="ts">
  import { fade } from 'svelte/transition';
  import { quadIn } from 'svelte/easing';

  export let languages: string[] = [];
  $: icons = languages
      .map(async lang => {
        const data = import(`@my/assets/lang-icons/${lang}.svg`) as Promise<ImportedSvg>;
        return {
          lang,
          data: (await data).default,
        };
      });

  $: maxIndex = languages.length;
  const averageDelay = 200;
  const getDelay = (index: number) => {
    const ratio = (index + 1) / maxIndex;
    const easedRatio = quadIn(ratio);
    return averageDelay * easedRatio * maxIndex;
  }
</script>

<div class="flex">
  {#each icons as icon, index}
    {#await icon then { lang, data }}
      <img
        src={data}
        alt={lang}
        in:fade={{delay:getDelay(index)}}
        class="w-8 h-8">
    {/await}
  {/each}
</div>

